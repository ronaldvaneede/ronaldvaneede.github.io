1646056491a:5:{s:7:"wrapped";s:6548:"<pre><code data-theme='material-theme-palenight' data-lang='bash' class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #676E95;">#!/bin/bash</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span>&nbsp;</div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">[</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$(</span><span style="color: #FFCB6B;">dpkg-query</span><span style="color: #C3E88D;"> -W -f=</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">${Status}</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;"> ansible </span><span style="color: #89DDFF;">2&gt;</span><span style="color: #C3E88D;">/dev/null </span><span style="color: #89DDFF;">|</span><span style="color: #C3E88D;"> </span><span style="color: #FFCB6B;">grep</span><span style="color: #C3E88D;"> -c </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ok installed</span><span style="color: #89DDFF;">&quot;)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">-eq</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">0</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">];</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #89DDFF;">then</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #A6ACCD;">    </span><span style="color: #82AAFF;">echo</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Add APT repositories</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #A6ACCD;">    </span><span style="color: #C792EA;">export</span><span style="color: #A6ACCD;"> DEBIAN_FRONTEND</span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;">noninteractive</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">install</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qq</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">software-properties-common</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-add-repository</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">ppa:ansible/ansible</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">update</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qqecho</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Installing Ansible</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">install</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qq</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">ansible</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #A6ACCD;">    </span><span style="color: #82AAFF;">echo</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Ansible installed</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #FFCB6B;">ficd</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">/vagrant</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #FFCB6B;">ansible-playbook</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-K</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">playbook.yml</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">--connection=local</span></div></code></pre>";s:11:"highlighted";s:6374:"<!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #676E95;">#!/bin/bash</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span>&nbsp;</div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #89DDFF;">if</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">[</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">$(</span><span style="color: #FFCB6B;">dpkg-query</span><span style="color: #C3E88D;"> -W -f=</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;">${Status}</span><span style="color: #89DDFF;">&#39;</span><span style="color: #C3E88D;"> ansible </span><span style="color: #89DDFF;">2&gt;</span><span style="color: #C3E88D;">/dev/null </span><span style="color: #89DDFF;">|</span><span style="color: #C3E88D;"> </span><span style="color: #FFCB6B;">grep</span><span style="color: #C3E88D;"> -c </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">ok installed</span><span style="color: #89DDFF;">&quot;)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">-eq</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">0</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">];</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #89DDFF;">then</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #A6ACCD;">    </span><span style="color: #82AAFF;">echo</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Add APT repositories</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #A6ACCD;">    </span><span style="color: #C792EA;">export</span><span style="color: #A6ACCD;"> DEBIAN_FRONTEND</span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;">noninteractive</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">install</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qq</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">software-properties-common</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-add-repository</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">ppa:ansible/ansible</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">update</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qqecho</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Installing Ansible</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span><span style="color: #A6ACCD;">    </span><span style="color: #FFCB6B;">apt-get</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">install</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-qq</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">ansible</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&amp;&gt;</span><span style="color: #A6ACCD;"> /dev/null </span><span style="color: #89DDFF;">||</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">exit</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">1</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #A6ACCD;">    </span><span style="color: #82AAFF;">echo</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Ansible installed</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #FFCB6B;">ficd</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">/vagrant</span></div><div class='line'><span style="color:#a6accd40; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #FFCB6B;">ansible-playbook</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">-K</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">playbook.yml</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">--connection=local</span></div>";s:6:"styles";s:67:"background-color: #292D3E; --theme-selection-background: #00000080;";s:7:"classes";s:10:"torchlight";s:5:"attrs";a:2:{s:10:"data-theme";s:24:"material-theme-palenight";s:9:"data-lang";s:4:"bash";}}